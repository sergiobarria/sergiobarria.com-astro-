---
---

<!-- This script loads the user theme mode preference -->
<script is:inline>
	const storageKey = 'mode';
	const doc = document.documentElement;

	const getColorPreference = () => {
		if (localStorage.getItem(storageKey)) return localStorage.getItem(storageKey);
		else return 'dark';
	};

	const setColorPreference = () => {
		localStorage.setItem(storageKey, getColorPreference());
		reflectPreference();
	};

	const reflectPreference = () => {
		const mode = getColorPreference();

		if (mode === 'dark') {
			doc.classList.add('dark');
		} else {
			if (doc.classList.contains('dark')) doc.classList.remove('dark');
		}
	};

	// 👇🏼 need this to avoid flash of light mode on page load
	reflectPreference();
	window.onload = () => {
		setColorPreference();
	};
</script>
