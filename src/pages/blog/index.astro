---
import type { Props as SeoProps } from 'astro-seo';
import BaseLayout from '~/layouts/BaseLayout.astro';
import BlogPostsList from '~/shared/components/svelte/BlogPostsList.svelte';

import { getAllPosts } from 'notion/client';

import site from '../../../site.json';

const posts = await getAllPosts();

const metadata: SeoProps = {
	title: 'Blog | Sergio Barria',
	canonical: 'https://sergiobarria.com/blog',
	openGraph: {
		basic: {
			title: 'Blog page',
			url: 'https://sergiobarria.com/',
			image: site.openGraph.images[0].url,
			type: 'website',
		},
		image: {
			alt: 'Website Cover',
		},
	},
};
---

<BaseLayout metadata={metadata}>
	<div class="container">
		<h1>My Blog</h1>
		<p>Here are all the posts I've published since starting this website.</p>
		<hr class="border-surface-four" />

		<section id="blog-list" class="my-8">
			<h2>All My Posts</h2>
			<p>
				In total, I've written <strong>{posts.length}</strong> articles in this blog. You can find them
				all below, or by searching for a post title.
			</p>
			<BlogPostsList client:load {posts} />
		</section>
	</div>
</BaseLayout>
